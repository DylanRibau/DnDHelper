<div class="wrapper">
  <div class="current-creature-info" *ngIf="rounds > 0">
    <creature-info [creature]="creatureExpanded" *ngIf="creatureExpanded != null"></creature-info>
    <div class="current-creature-info-placeholder" *ngIf="creatureExpanded == null">
      <h1>Click a creatures info button to display it here!</h1>
    </div>
  </div>

  <div class="combat-setup" *ngIf="combatSetup">
    <div class="combat-setup-inner">
      <table class="table table-dark table-hover">
        <tbody>
          <tr *ngFor="let creature of combatSetupCreatures">
            <td><h5>{{creature.creature.name}}</h5></td>
            <td>x{{creature.amount}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="2"><button class="btn btn-primary" (click)="startCombat()">Start Combat</button></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <div class="combat-setup-creatures-view" *ngIf="combatSetup">
    <div class="combat-setup-inner">

    </div>
  </div>

  <div class="combat" *ngIf="!combatSetup">
    <div class="combat-inner">
      <div class="creatures-tools">
        <button class="btn btn-info sort-button" (click)="sortInCombat()">Sort</button>
        <button class="btn btn-success add-button" (click)="openDialogInCombat()" mat-button>Add</button>
      </div>
      <div class="combat-tools">
        <div>
          <span class="combat-tools-label">Rounds</span>
          <span class="combat-tools-value">{{rounds}}</span>
        </div>
        <div>
          <span class="combat-tools-label">Turn</span>
          <span class="combat-tools-value">{{turn}}</span>
        </div>
        <button class="btn btn-primary" (click)="initializeCombat()" *ngIf="rounds == 0">Start</button>
        <button class="btn btn-primary" (click)="nextTurn()" *ngIf="rounds > 0">Next</button>
      </div>
      <table class="table table-dark table-hover">
        <tbody>
          <tr [className]="creature.class" *ngFor="let creature of combatCreatures">
            <td>
              <input class="initiative-input" type="number" [(ngModel)]="creature.initiative" />
              <div></div>
              <a (click)="displayCreatureInfo(creature)" class="btn btn-primary"><img src="assets/images/storage.png"></a>
            </td>
            <td>
              <input class="initiative-input-name" type="text" [(ngModel)]="creature.creature.name" />
              <div></div>
              <span class="info-label">AC</span><span class="info-value">{{creature.creature.armor_class}}</span>
              <div></div>
              <span class="info-label">Str</span><span class="info-value">{{utilService.calculateModifierString(creature.creature.strength)}}</span>
              <span class="info-label">Dex</span><span class="info-value">{{utilService.calculateModifierString(creature.creature.dexterity)}}</span>
              <span class="info-label">Con</span><span class="info-value">{{utilService.calculateModifierString(creature.creature.constitution)}}</span>
              <span class="info-label">Int</span><span class="info-value">{{utilService.calculateModifierString(creature.creature.intelligence)}}</span>
              <span class="info-label">Wis</span><span class="info-value">{{utilService.calculateModifierString(creature.creature.wisdom)}}</span>
              <span class="info-label">Cha</span><span class="info-value">{{utilService.calculateModifierString(creature.creature.charisma)}}</span>
            </td>
            <td class="hit-points-container">
              <div class="hit-points">
                <input class="initiative-input" type="number" [(ngModel)]="creature.current_hit_points" />
                <div class="line"></div>
                <input class="initiative-input" type="number" [(ngModel)]="creature.creature.hit_points" />
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="additional-info" *ngIf="currentCreature != null">
    <creature-info [creature]="currentCreature"></creature-info>
  </div>
</div>
